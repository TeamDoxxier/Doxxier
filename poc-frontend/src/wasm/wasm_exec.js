!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("xxdk",[],t):"object"==typeof exports?exports.xxdk=t():e.xxdk=t()}(this,(()=>(()=>{"use strict";return(()=>{const e=()=>{const e=new Error("not implemented");return e.code="ENOSYS",e};if(!globalThis.fs){let t="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(e,i){t+=s.decode(i);const n=t.lastIndexOf("\n");return-1!=n&&(console.log(t.substring(0,n)),t=t.substring(n+1)),i.length},write(t,s,i,n,o,r){0===i&&n===s.length&&null===o?r(null,this.writeSync(t,s)):r(e())},chmod(t,s,i){i(e())},chown(t,s,i,n){n(e())},close(t,s){s(e())},fchmod(t,s,i){i(e())},fchown(t,s,i,n){n(e())},fstat(t,s){s(e())},fsync(e,t){t(null)},ftruncate(t,s,i){i(e())},lchown(t,s,i,n){n(e())},link(t,s,i){i(e())},lstat(t,s){s(e())},mkdir(t,s,i){i(e())},open(t,s,i,n){n(e())},read(t,s,i,n,o,r){r(e())},readdir(t,s){s(e())},readlink(t,s){s(e())},rename(t,s,i){i(e())},rmdir(t,s){s(e())},stat(t,s){s(e())},symlink(t,s,i){i(e())},truncate(t,s,i){i(e())},unlink(t,s){s(e())},utimes(t,s,i,n){n(e())}}}if(globalThis.process||(globalThis.process={getuid:()=>-1,getgid:()=>-1,geteuid:()=>-1,getegid:()=>-1,getgroups(){throw e()},pid:-1,ppid:-1,umask(){throw e()},cwd(){throw e()},chdir(){throw e()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const t=new TextEncoder("utf-8"),s=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{0!==e&&console.warn("exit code:",e)},this._exitPromise=new Promise((e=>{this._resolveExitPromise=e})),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const e=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},i=e=>this.mem.getUint32(e+0,!0)+4294967296*this.mem.getInt32(e+4,!0),n=e=>{const t=this.mem.getFloat64(e,!0);if(0===t)return;if(!isNaN(t))return t;const s=this.mem.getUint32(e,!0);return this._values[s]},o=(e,t)=>{const s=2146959360;if("number"==typeof t&&0!==t)return isNaN(t)?(this.mem.setUint32(e+4,s,!0),void this.mem.setUint32(e,0,!0)):void this.mem.setFloat64(e,t,!0);if(void 0===t)return void this.mem.setFloat64(e,0,!0);let i=this._ids.get(t);void 0===i&&(i=this._idPool.pop(),void 0===i&&(i=this._values.length),this._values[i]=t,this._goRefCounts[i]=0,this._ids.set(t,i)),this._goRefCounts[i]++;let n=0;switch(typeof t){case"object":null!==t&&(n=1);break;case"string":n=2;break;case"symbol":n=3;break;case"function":n=4}this.mem.setUint32(e+4,s|n,!0),this.mem.setUint32(e,i,!0)},r=e=>{const t=i(e+0),s=i(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,s)},l=e=>{const t=i(e+0),s=i(e+8),o=new Array(s);for(let e=0;e<s;e++)o[e]=n(t+8*e);return o},a=e=>{const t=i(e+0),n=i(e+8);return s.decode(new DataView(this._inst.exports.mem.buffer,t,n))},h=Date.now()-performance.now();this.importObject={_gotest:{add:(e,t)=>e+t},gojs:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{const t=i(8+(e>>>=0)),s=i(e+16),n=this.mem.getInt32(e+24,!0);fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,s,n))},"runtime.resetMemoryDataView":e=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{e(8+(t>>>=0),1e6*(h+performance.now()))},"runtime.walltime":t=>{t>>>=0;const s=(new Date).getTime();e(t+8,s/1e3),this.mem.setInt32(t+16,s%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout((()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()}),i(e+8))),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(r(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,0===this._goRefCounts[t]){const e=this._values[t];this._values[t]=null,this._ids.delete(e),this._idPool.push(t)}},"syscall/js.stringVal":e=>{o(24+(e>>>=0),a(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(n(e+8),a(e+16));e=this._inst.exports.getsp()>>>0,o(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(n(e+8),a(e+16),n(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(n(e+8),a(e+16))},"syscall/js.valueIndex":e=>{o(24+(e>>>=0),Reflect.get(n(e+8),i(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(n(e+8),i(e+16),n(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=n(e+8),s=Reflect.get(t,a(e+16)),i=l(e+32),r=Reflect.apply(s,t,i);e=this._inst.exports.getsp()>>>0,o(e+56,r),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,o(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=n(e+8),s=l(e+16),i=Reflect.apply(t,void 0,s);e=this._inst.exports.getsp()>>>0,o(e+40,i),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,o(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=n(e+8),s=l(e+16),i=Reflect.construct(t,s);e=this._inst.exports.getsp()>>>0,o(e+40,i),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,o(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":t=>{e(16+(t>>>=0),parseInt(n(t+8).length))},"syscall/js.valuePrepareString":s=>{s>>>=0;const i=t.encode(String(n(s+8)));o(s+16,i),e(s+24,i.length)},"syscall/js.valueLoadString":e=>{const t=n(8+(e>>>=0));r(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,n(e+8)instanceof n(e+16)?1:0)},"syscall/js.copyBytesToGo":t=>{const s=r(8+(t>>>=0)),i=n(t+32);if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const o=i.subarray(0,s.length);s.set(o),e(t+40,o.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{const s=n(8+(t>>>=0)),i=r(t+16);if(!(s instanceof Uint8Array||s instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const o=i.subarray(0,s.length);s.set(o),e(t+40,o.length),this.mem.setUint8(t+48,1)},debug:e=>{console.log(e)},"gitlab.com/elixxir/wasm-utils/exception.throw":e=>{const t=a(e+8),s=a(e+24);throw new Error(t+": "+s)},"runtime.Throw":e=>{const t=a(e+8),s=a(e+24);throw new Error(t+": "+s)}}},this.importObject.go=this.importObject.gojs}async run(e){if(!(e instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=e,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let s=4096;const i=e=>{const i=s,n=t.encode(e+"\0");return new Uint8Array(this.mem.buffer,s,n.length).set(n),s+=n.length,s%8!=0&&(s+=8-s%8),i},n=this.argv.length,o=[];this.argv.forEach((e=>{o.push(i(e))})),o.push(0),Object.keys(this.env).sort().forEach((e=>{o.push(i(`${e}=${this.env[e]}`))})),o.push(0);const r=s;if(o.forEach((e=>{this.mem.setUint32(s,e,!0),this.mem.setUint32(s+4,0,!0),s+=8})),s>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(n,r),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){const t=this;return function(){const s={id:e,this:this,args:arguments};return t._pendingEvent=s,t._resume(),s.result}}}})(),{}})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBRyxHQUNsQ0EsR0FBVSxDQUFDLElBTVJBLEdBRG9CLE1BRXZCLE1BQU0sSUFBSXhCLE1BQU0sd0VBR2pCSCxLQUFLNkgsTUFBTWpJLFFBQVFxTCxJQUFJVSxFQUFNekcsR0FDekJsRixLQUFLOEksUUFDUjlJLEtBQUt5Riw0QkFFQXpGLEtBQUtzRixZQUNaLENBRUEsT0FBQStELEdBQ0MsR0FBSXJKLEtBQUs4SSxPQUNSLE1BQU0sSUFBSTNJLE1BQU0saUNBRWpCSCxLQUFLNkgsTUFBTWpJLFFBQVF1TSxTQUNmbk0sS0FBSzhJLFFBQ1I5SSxLQUFLeUYscUJBRVAsQ0FFQSxnQkFBQTJHLENBQWlCeEYsR0FDaEIsTUFBTW9FLEVBQUtoTCxLQUNYLE9BQU8sV0FDTixNQUFNcU0sRUFBUSxDQUFFekYsR0FBSUEsRUFBSTVHLEtBQU1BLEtBQU1nSyxLQUFNc0MsV0FHMUMsT0FGQXRCLEVBQUd0RixjQUFnQjJHLEVBQ25CckIsRUFBRzNCLFVBQ0lnRCxFQUFNMUMsTUFDZCxDQUNELEVBRUQsRUF0akJELEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94eGRrL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly94eGRrLy4vd2FzbV9leGVjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwieHhka1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ4eGRrXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInh4ZGtcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwiLy8gQ29weXJpZ2h0IDIwMTggVGhlIEdvIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZVxuLy8gbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlLlxuXG5cInVzZSBzdHJpY3RcIjtcblxuKCgpID0+IHtcblx0Y29uc3QgZW5vc3lzID0gKCkgPT4ge1xuXHRcdGNvbnN0IGVyciA9IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTtcblx0XHRlcnIuY29kZSA9IFwiRU5PU1lTXCI7XG5cdFx0cmV0dXJuIGVycjtcblx0fTtcblxuXHRpZiAoIWdsb2JhbFRoaXMuZnMpIHtcblx0XHRsZXQgb3V0cHV0QnVmID0gXCJcIjtcblx0XHRnbG9iYWxUaGlzLmZzID0ge1xuXHRcdFx0Y29uc3RhbnRzOiB7IE9fV1JPTkxZOiAtMSwgT19SRFdSOiAtMSwgT19DUkVBVDogLTEsIE9fVFJVTkM6IC0xLCBPX0FQUEVORDogLTEsIE9fRVhDTDogLTEgfSwgLy8gdW51c2VkXG5cdFx0XHR3cml0ZVN5bmMoZmQsIGJ1Zikge1xuXHRcdFx0XHRvdXRwdXRCdWYgKz0gZGVjb2Rlci5kZWNvZGUoYnVmKTtcblx0XHRcdFx0Y29uc3QgbmwgPSBvdXRwdXRCdWYubGFzdEluZGV4T2YoXCJcXG5cIik7XG5cdFx0XHRcdGlmIChubCAhPSAtMSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKG91dHB1dEJ1Zi5zdWJzdHJpbmcoMCwgbmwpKTtcblx0XHRcdFx0XHRvdXRwdXRCdWYgPSBvdXRwdXRCdWYuc3Vic3RyaW5nKG5sICsgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGJ1Zi5sZW5ndGg7XG5cdFx0XHR9LFxuXHRcdFx0d3JpdGUoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBjYWxsYmFjaykge1xuXHRcdFx0XHRpZiAob2Zmc2V0ICE9PSAwIHx8IGxlbmd0aCAhPT0gYnVmLmxlbmd0aCB8fCBwb3NpdGlvbiAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKGVub3N5cygpKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgbiA9IHRoaXMud3JpdGVTeW5jKGZkLCBidWYpO1xuXHRcdFx0XHRjYWxsYmFjayhudWxsLCBuKTtcblx0XHRcdH0sXG5cdFx0XHRjaG1vZChwYXRoLCBtb2RlLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRjaG93bihwYXRoLCB1aWQsIGdpZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0Y2xvc2UoZmQsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdGZjaG1vZChmZCwgbW9kZSwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0ZmNob3duKGZkLCB1aWQsIGdpZCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0ZnN0YXQoZmQsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdGZzeW5jKGZkLCBjYWxsYmFjaykgeyBjYWxsYmFjayhudWxsKTsgfSxcblx0XHRcdGZ0cnVuY2F0ZShmZCwgbGVuZ3RoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRsY2hvd24ocGF0aCwgdWlkLCBnaWQsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdGxpbmsocGF0aCwgbGluaywgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0bHN0YXQocGF0aCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0bWtkaXIocGF0aCwgcGVybSwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0b3BlbihwYXRoLCBmbGFncywgbW9kZSwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0cmVhZChmZCwgYnVmZmVyLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHJlYWRkaXIocGF0aCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0cmVhZGxpbmsocGF0aCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0cmVuYW1lKGZyb20sIHRvLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRybWRpcihwYXRoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHRzdGF0KHBhdGgsIGNhbGxiYWNrKSB7IGNhbGxiYWNrKGVub3N5cygpKTsgfSxcblx0XHRcdHN5bWxpbmsocGF0aCwgbGluaywgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0dHJ1bmNhdGUocGF0aCwgbGVuZ3RoLCBjYWxsYmFjaykgeyBjYWxsYmFjayhlbm9zeXMoKSk7IH0sXG5cdFx0XHR1bmxpbmsocGF0aCwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdFx0dXRpbWVzKHBhdGgsIGF0aW1lLCBtdGltZSwgY2FsbGJhY2spIHsgY2FsbGJhY2soZW5vc3lzKCkpOyB9LFxuXHRcdH07XG5cdH1cblxuXHRpZiAoIWdsb2JhbFRoaXMucHJvY2Vzcykge1xuXHRcdGdsb2JhbFRoaXMucHJvY2VzcyA9IHtcblx0XHRcdGdldHVpZCgpIHsgcmV0dXJuIC0xOyB9LFxuXHRcdFx0Z2V0Z2lkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRldWlkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRlZ2lkKCkgeyByZXR1cm4gLTE7IH0sXG5cdFx0XHRnZXRncm91cHMoKSB7IHRocm93IGVub3N5cygpOyB9LFxuXHRcdFx0cGlkOiAtMSxcblx0XHRcdHBwaWQ6IC0xLFxuXHRcdFx0dW1hc2soKSB7IHRocm93IGVub3N5cygpOyB9LFxuXHRcdFx0Y3dkKCkgeyB0aHJvdyBlbm9zeXMoKTsgfSxcblx0XHRcdGNoZGlyKCkgeyB0aHJvdyBlbm9zeXMoKTsgfSxcblx0XHR9XG5cdH1cblxuXHRpZiAoIWdsb2JhbFRoaXMuY3J5cHRvKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiZ2xvYmFsVGhpcy5jcnlwdG8gaXMgbm90IGF2YWlsYWJsZSwgcG9seWZpbGwgcmVxdWlyZWQgKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgb25seSlcIik7XG5cdH1cblxuXHRpZiAoIWdsb2JhbFRoaXMucGVyZm9ybWFuY2UpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJnbG9iYWxUaGlzLnBlcmZvcm1hbmNlIGlzIG5vdCBhdmFpbGFibGUsIHBvbHlmaWxsIHJlcXVpcmVkIChwZXJmb3JtYW5jZS5ub3cgb25seSlcIik7XG5cdH1cblxuXHRpZiAoIWdsb2JhbFRoaXMuVGV4dEVuY29kZXIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJnbG9iYWxUaGlzLlRleHRFbmNvZGVyIGlzIG5vdCBhdmFpbGFibGUsIHBvbHlmaWxsIHJlcXVpcmVkXCIpO1xuXHR9XG5cblx0aWYgKCFnbG9iYWxUaGlzLlRleHREZWNvZGVyKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiZ2xvYmFsVGhpcy5UZXh0RGVjb2RlciBpcyBub3QgYXZhaWxhYmxlLCBwb2x5ZmlsbCByZXF1aXJlZFwiKTtcblx0fVxuXG5cdGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoXCJ1dGYtOFwiKTtcblx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuXG5cdGdsb2JhbFRoaXMuR28gPSBjbGFzcyB7XG5cdFx0Y29uc3RydWN0b3IoKSB7XG5cdFx0XHR0aGlzLmFyZ3YgPSBbXCJqc1wiXTtcblx0XHRcdHRoaXMuZW52ID0ge307XG5cdFx0XHR0aGlzLmV4aXQgPSAoY29kZSkgPT4ge1xuXHRcdFx0XHRpZiAoY29kZSAhPT0gMCkge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcImV4aXQgY29kZTpcIiwgY29kZSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHR0aGlzLl9leGl0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRcdHRoaXMuX3Jlc29sdmVFeGl0UHJvbWlzZSA9IHJlc29sdmU7XG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuX3BlbmRpbmdFdmVudCA9IG51bGw7XG5cdFx0XHR0aGlzLl9zY2hlZHVsZWRUaW1lb3V0cyA9IG5ldyBNYXAoKTtcblx0XHRcdHRoaXMuX25leHRDYWxsYmFja1RpbWVvdXRJRCA9IDE7XG5cblx0XHRcdGNvbnN0IHNldEludDY0ID0gKGFkZHIsIHYpID0+IHtcblx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyAwLCB2LCB0cnVlKTtcblx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyA0LCBNYXRoLmZsb29yKHYgLyA0Mjk0OTY3Mjk2KSwgdHJ1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNldEludDMyID0gKGFkZHIsIHYpID0+IHtcblx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDMyKGFkZHIgKyAwLCB2LCB0cnVlKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZ2V0SW50NjQgPSAoYWRkcikgPT4ge1xuXHRcdFx0XHRjb25zdCBsb3cgPSB0aGlzLm1lbS5nZXRVaW50MzIoYWRkciArIDAsIHRydWUpO1xuXHRcdFx0XHRjb25zdCBoaWdoID0gdGhpcy5tZW0uZ2V0SW50MzIoYWRkciArIDQsIHRydWUpO1xuXHRcdFx0XHRyZXR1cm4gbG93ICsgaGlnaCAqIDQyOTQ5NjcyOTY7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRWYWx1ZSA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGYgPSB0aGlzLm1lbS5nZXRGbG9hdDY0KGFkZHIsIHRydWUpO1xuXHRcdFx0XHRpZiAoZiA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFpc05hTihmKSkge1xuXHRcdFx0XHRcdHJldHVybiBmO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgaWQgPSB0aGlzLm1lbS5nZXRVaW50MzIoYWRkciwgdHJ1ZSk7XG5cdFx0XHRcdHJldHVybiB0aGlzLl92YWx1ZXNbaWRdO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdG9yZVZhbHVlID0gKGFkZHIsIHYpID0+IHtcblx0XHRcdFx0Y29uc3QgbmFuSGVhZCA9IDB4N0ZGODAwMDA7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIHYgIT09IDApIHtcblx0XHRcdFx0XHRpZiAoaXNOYU4odikpIHtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQzMihhZGRyICsgNCwgbmFuSGVhZCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciwgMCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMubWVtLnNldEZsb2F0NjQoYWRkciwgdiwgdHJ1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHYgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHRoaXMubWVtLnNldEZsb2F0NjQoYWRkciwgMCwgdHJ1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bGV0IGlkID0gdGhpcy5faWRzLmdldCh2KTtcblx0XHRcdFx0aWYgKGlkID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRpZCA9IHRoaXMuX2lkUG9vbC5wb3AoKTtcblx0XHRcdFx0XHRpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0aWQgPSB0aGlzLl92YWx1ZXMubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl92YWx1ZXNbaWRdID0gdjtcblx0XHRcdFx0XHR0aGlzLl9nb1JlZkNvdW50c1tpZF0gPSAwO1xuXHRcdFx0XHRcdHRoaXMuX2lkcy5zZXQodiwgaWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuX2dvUmVmQ291bnRzW2lkXSsrO1xuXHRcdFx0XHRsZXQgdHlwZUZsYWcgPSAwO1xuXHRcdFx0XHRzd2l0Y2ggKHR5cGVvZiB2KSB7XG5cdFx0XHRcdFx0Y2FzZSBcIm9iamVjdFwiOlxuXHRcdFx0XHRcdFx0aWYgKHYgIT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAxO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInN0cmluZ1wiOlxuXHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAyO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInN5bWJvbFwiOlxuXHRcdFx0XHRcdFx0dHlwZUZsYWcgPSAzO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XG5cdFx0XHRcdFx0XHR0eXBlRmxhZyA9IDQ7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIoYWRkciArIDQsIG5hbkhlYWQgfCB0eXBlRmxhZywgdHJ1ZSk7XG5cdFx0XHRcdHRoaXMubWVtLnNldFVpbnQzMihhZGRyLCBpZCwgdHJ1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRTbGljZSA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFycmF5ID0gZ2V0SW50NjQoYWRkciArIDApO1xuXHRcdFx0XHRjb25zdCBsZW4gPSBnZXRJbnQ2NChhZGRyICsgOCk7XG5cdFx0XHRcdHJldHVybiBuZXcgVWludDhBcnJheSh0aGlzLl9pbnN0LmV4cG9ydHMubWVtLmJ1ZmZlciwgYXJyYXksIGxlbik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxvYWRTbGljZU9mVmFsdWVzID0gKGFkZHIpID0+IHtcblx0XHRcdFx0Y29uc3QgYXJyYXkgPSBnZXRJbnQ2NChhZGRyICsgMCk7XG5cdFx0XHRcdGNvbnN0IGxlbiA9IGdldEludDY0KGFkZHIgKyA4KTtcblx0XHRcdFx0Y29uc3QgYSA9IG5ldyBBcnJheShsZW4pO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0YVtpXSA9IGxvYWRWYWx1ZShhcnJheSArIGkgKiA4KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbG9hZFN0cmluZyA9IChhZGRyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNhZGRyID0gZ2V0SW50NjQoYWRkciArIDApO1xuXHRcdFx0XHRjb25zdCBsZW4gPSBnZXRJbnQ2NChhZGRyICsgOCk7XG5cdFx0XHRcdHJldHVybiBkZWNvZGVyLmRlY29kZShuZXcgRGF0YVZpZXcodGhpcy5faW5zdC5leHBvcnRzLm1lbS5idWZmZXIsIHNhZGRyLCBsZW4pKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdGltZU9yaWdpbiA9IERhdGUubm93KCkgLSBwZXJmb3JtYW5jZS5ub3coKTtcblx0XHRcdHRoaXMuaW1wb3J0T2JqZWN0ID0ge1xuXHRcdFx0XHRfZ290ZXN0OiB7XG5cdFx0XHRcdFx0YWRkOiAoYSwgYikgPT4gYSArIGIsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGdvanM6IHtcblx0XHRcdFx0XHQvLyBHbydzIFNQIGRvZXMgbm90IGNoYW5nZSBhcyBsb25nIGFzIG5vIEdvIGNvZGUgaXMgcnVubmluZy4gU29tZSBvcGVyYXRpb25zIChlLmcuIGNhbGxzLCBnZXR0ZXJzIGFuZCBzZXR0ZXJzKVxuXHRcdFx0XHRcdC8vIG1heSBzeW5jaHJvbm91c2x5IHRyaWdnZXIgYSBHbyBldmVudCBoYW5kbGVyLiBUaGlzIG1ha2VzIEdvIGNvZGUgZ2V0IGV4ZWN1dGVkIGluIHRoZSBtaWRkbGUgb2YgdGhlIGltcG9ydGVkXG5cdFx0XHRcdFx0Ly8gZnVuY3Rpb24uIEEgZ29yb3V0aW5lIGNhbiBzd2l0Y2ggdG8gYSBuZXcgc3RhY2sgaWYgdGhlIGN1cnJlbnQgc3RhY2sgaXMgdG9vIHNtYWxsIChzZWUgbW9yZXN0YWNrIGZ1bmN0aW9uKS5cblx0XHRcdFx0XHQvLyBUaGlzIGNoYW5nZXMgdGhlIFNQLCB0aHVzIHdlIGhhdmUgdG8gdXBkYXRlIHRoZSBTUCB1c2VkIGJ5IHRoZSBpbXBvcnRlZCBmdW5jdGlvbi5cblxuXHRcdFx0XHRcdC8vIGZ1bmMgd2FzbUV4aXQoY29kZSBpbnQzMilcblx0XHRcdFx0XHRcInJ1bnRpbWUud2FzbUV4aXRcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBjb2RlID0gdGhpcy5tZW0uZ2V0SW50MzIoc3AgKyA4LCB0cnVlKTtcblx0XHRcdFx0XHRcdHRoaXMuZXhpdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9pbnN0O1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX3ZhbHVlcztcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9nb1JlZkNvdW50cztcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9pZHM7XG5cdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5faWRQb29sO1xuXHRcdFx0XHRcdFx0dGhpcy5leGl0KGNvZGUpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHdhc21Xcml0ZShmZCB1aW50cHRyLCBwIHVuc2FmZS5Qb2ludGVyLCBuIGludDMyKVxuXHRcdFx0XHRcdFwicnVudGltZS53YXNtV3JpdGVcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBmZCA9IGdldEludDY0KHNwICsgOCk7XG5cdFx0XHRcdFx0XHRjb25zdCBwID0gZ2V0SW50NjQoc3AgKyAxNik7XG5cdFx0XHRcdFx0XHRjb25zdCBuID0gdGhpcy5tZW0uZ2V0SW50MzIoc3AgKyAyNCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRmcy53cml0ZVN5bmMoZmQsIG5ldyBVaW50OEFycmF5KHRoaXMuX2luc3QuZXhwb3J0cy5tZW0uYnVmZmVyLCBwLCBuKSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgcmVzZXRNZW1vcnlEYXRhVmlldygpXG5cdFx0XHRcdFx0XCJydW50aW1lLnJlc2V0TWVtb3J5RGF0YVZpZXdcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbSA9IG5ldyBEYXRhVmlldyh0aGlzLl9pbnN0LmV4cG9ydHMubWVtLmJ1ZmZlcik7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgbmFub3RpbWUxKCkgaW50NjRcblx0XHRcdFx0XHRcInJ1bnRpbWUubmFub3RpbWUxXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0c2V0SW50NjQoc3AgKyA4LCAodGltZU9yaWdpbiArIHBlcmZvcm1hbmNlLm5vdygpKSAqIDEwMDAwMDApO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHdhbGx0aW1lKCkgKHNlYyBpbnQ2NCwgbnNlYyBpbnQzMilcblx0XHRcdFx0XHRcInJ1bnRpbWUud2FsbHRpbWVcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBtc2VjID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDgsIG1zZWMgLyAxMDAwKTtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldEludDMyKHNwICsgMTYsIChtc2VjICUgMTAwMCkgKiAxMDAwMDAwLCB0cnVlKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBzY2hlZHVsZVRpbWVvdXRFdmVudChkZWxheSBpbnQ2NCkgaW50MzJcblx0XHRcdFx0XHRcInJ1bnRpbWUuc2NoZWR1bGVUaW1lb3V0RXZlbnRcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBpZCA9IHRoaXMuX25leHRDYWxsYmFja1RpbWVvdXRJRDtcblx0XHRcdFx0XHRcdHRoaXMuX25leHRDYWxsYmFja1RpbWVvdXRJRCsrO1xuXHRcdFx0XHRcdFx0dGhpcy5fc2NoZWR1bGVkVGltZW91dHMuc2V0KGlkLCBzZXRUaW1lb3V0KFxuXHRcdFx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fcmVzdW1lKCk7XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKHRoaXMuX3NjaGVkdWxlZFRpbWVvdXRzLmhhcyhpZCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGZvciBzb21lIHJlYXNvbiBHbyBmYWlsZWQgdG8gcmVnaXN0ZXIgdGhlIHRpbWVvdXQgZXZlbnQsIGxvZyBhbmQgdHJ5IGFnYWluXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyAodGVtcG9yYXJ5IHdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9nb2xhbmcvZ28vaXNzdWVzLzI4OTc1KVxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKFwic2NoZWR1bGVUaW1lb3V0RXZlbnQ6IG1pc3NlZCB0aW1lb3V0IGV2ZW50XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fcmVzdW1lKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRnZXRJbnQ2NChzcCArIDgpLFxuXHRcdFx0XHRcdFx0KSk7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRJbnQzMihzcCArIDE2LCBpZCwgdHJ1ZSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgY2xlYXJUaW1lb3V0RXZlbnQoaWQgaW50MzIpXG5cdFx0XHRcdFx0XCJydW50aW1lLmNsZWFyVGltZW91dEV2ZW50XCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0Y29uc3QgaWQgPSB0aGlzLm1lbS5nZXRJbnQzMihzcCArIDgsIHRydWUpO1xuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX3NjaGVkdWxlZFRpbWVvdXRzLmdldChpZCkpO1xuXHRcdFx0XHRcdFx0dGhpcy5fc2NoZWR1bGVkVGltZW91dHMuZGVsZXRlKGlkKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBnZXRSYW5kb21EYXRhKHIgW11ieXRlKVxuXHRcdFx0XHRcdFwicnVudGltZS5nZXRSYW5kb21EYXRhXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyhsb2FkU2xpY2Uoc3AgKyA4KSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgZmluYWxpemVSZWYodiByZWYpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLmZpbmFsaXplUmVmXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0Y29uc3QgaWQgPSB0aGlzLm1lbS5nZXRVaW50MzIoc3AgKyA4LCB0cnVlKTtcblx0XHRcdFx0XHRcdHRoaXMuX2dvUmVmQ291bnRzW2lkXS0tO1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuX2dvUmVmQ291bnRzW2lkXSA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB2ID0gdGhpcy5fdmFsdWVzW2lkXTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fdmFsdWVzW2lkXSA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2lkcy5kZWxldGUodik7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2lkUG9vbC5wdXNoKGlkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBzdHJpbmdWYWwodmFsdWUgc3RyaW5nKSByZWZcblx0XHRcdFx0XHRcInN5c2NhbGwvanMuc3RyaW5nVmFsXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDI0LCBsb2FkU3RyaW5nKHNwICsgOCkpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlR2V0KHYgcmVmLCBwIHN0cmluZykgcmVmXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlR2V0XCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gUmVmbGVjdC5nZXQobG9hZFZhbHVlKHNwICsgOCksIGxvYWRTdHJpbmcoc3AgKyAxNikpO1xuXHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyAzMiwgcmVzdWx0KTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB2YWx1ZVNldCh2IHJlZiwgcCBzdHJpbmcsIHggcmVmKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZVNldFwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdFJlZmxlY3Quc2V0KGxvYWRWYWx1ZShzcCArIDgpLCBsb2FkU3RyaW5nKHNwICsgMTYpLCBsb2FkVmFsdWUoc3AgKyAzMikpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlRGVsZXRlKHYgcmVmLCBwIHN0cmluZylcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVEZWxldGVcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGxvYWRWYWx1ZShzcCArIDgpLCBsb2FkU3RyaW5nKHNwICsgMTYpKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB2YWx1ZUluZGV4KHYgcmVmLCBpIGludCkgcmVmXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlSW5kZXhcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgMjQsIFJlZmxlY3QuZ2V0KGxvYWRWYWx1ZShzcCArIDgpLCBnZXRJbnQ2NChzcCArIDE2KSkpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyB2YWx1ZVNldEluZGV4KHYgcmVmLCBpIGludCwgeCByZWYpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlU2V0SW5kZXhcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRSZWZsZWN0LnNldChsb2FkVmFsdWUoc3AgKyA4KSwgZ2V0SW50NjQoc3AgKyAxNiksIGxvYWRWYWx1ZShzcCArIDI0KSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgdmFsdWVDYWxsKHYgcmVmLCBtIHN0cmluZywgYXJncyBbXXJlZikgKHJlZiwgYm9vbClcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVDYWxsXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdiA9IGxvYWRWYWx1ZShzcCArIDgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtID0gUmVmbGVjdC5nZXQodiwgbG9hZFN0cmluZyhzcCArIDE2KSk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFyZ3MgPSBsb2FkU2xpY2VPZlZhbHVlcyhzcCArIDMyKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShtLCB2LCBhcmdzKTtcblx0XHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDU2LCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDY0LCAxKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRzcCA9IHRoaXMuX2luc3QuZXhwb3J0cy5nZXRzcCgpID4+PiAwOyAvLyBzZWUgY29tbWVudCBhYm92ZVxuXHRcdFx0XHRcdFx0XHRzdG9yZVZhbHVlKHNwICsgNTYsIGVycik7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNjQsIDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyBmdW5jIHZhbHVlSW52b2tlKHYgcmVmLCBhcmdzIFtdcmVmKSAocmVmLCBib29sKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZUludm9rZVwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHYgPSBsb2FkVmFsdWUoc3AgKyA4KTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXJncyA9IGxvYWRTbGljZU9mVmFsdWVzKHNwICsgMTYpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KHYsIHVuZGVmaW5lZCwgYXJncyk7XG5cdFx0XHRcdFx0XHRcdHNwID0gdGhpcy5faW5zdC5leHBvcnRzLmdldHNwKCkgPj4+IDA7IC8vIHNlZSBjb21tZW50IGFib3ZlXG5cdFx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyA0MCwgcmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDQwLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB2YWx1ZU5ldyh2IHJlZiwgYXJncyBbXXJlZikgKHJlZiwgYm9vbClcblx0XHRcdFx0XHRcInN5c2NhbGwvanMudmFsdWVOZXdcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB2ID0gbG9hZFZhbHVlKHNwICsgOCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFyZ3MgPSBsb2FkU2xpY2VPZlZhbHVlcyhzcCArIDE2KTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QodiwgYXJncyk7XG5cdFx0XHRcdFx0XHRcdHNwID0gdGhpcy5faW5zdC5leHBvcnRzLmdldHNwKCkgPj4+IDA7IC8vIHNlZSBjb21tZW50IGFib3ZlXG5cdFx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyA0MCwgcmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5tZW0uc2V0VWludDgoc3AgKyA0OCwgMSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0c3AgPSB0aGlzLl9pbnN0LmV4cG9ydHMuZ2V0c3AoKSA+Pj4gMDsgLy8gc2VlIGNvbW1lbnQgYWJvdmVcblx0XHRcdFx0XHRcdFx0c3RvcmVWYWx1ZShzcCArIDQwLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB2YWx1ZUxlbmd0aCh2IHJlZikgaW50XG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlTGVuZ3RoXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0c2V0SW50NjQoc3AgKyAxNiwgcGFyc2VJbnQobG9hZFZhbHVlKHNwICsgOCkubGVuZ3RoKSk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIHZhbHVlUHJlcGFyZVN0cmluZyh2IHJlZikgKHJlZiwgaW50KVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZVByZXBhcmVTdHJpbmdcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBzdHIgPSBlbmNvZGVyLmVuY29kZShTdHJpbmcobG9hZFZhbHVlKHNwICsgOCkpKTtcblx0XHRcdFx0XHRcdHN0b3JlVmFsdWUoc3AgKyAxNiwgc3RyKTtcblx0XHRcdFx0XHRcdHNldEludDY0KHNwICsgMjQsIHN0ci5sZW5ndGgpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyB2YWx1ZUxvYWRTdHJpbmcodiByZWYsIGIgW11ieXRlKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy52YWx1ZUxvYWRTdHJpbmdcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBzdHIgPSBsb2FkVmFsdWUoc3AgKyA4KTtcblx0XHRcdFx0XHRcdGxvYWRTbGljZShzcCArIDE2KS5zZXQoc3RyKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyB2YWx1ZUluc3RhbmNlT2YodiByZWYsIHQgcmVmKSBib29sXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLnZhbHVlSW5zdGFuY2VPZlwiOiAoc3ApID0+IHtcblx0XHRcdFx0XHRcdHNwID4+Pj0gMDtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgMjQsIChsb2FkVmFsdWUoc3AgKyA4KSBpbnN0YW5jZW9mIGxvYWRWYWx1ZShzcCArIDE2KSkgPyAxIDogMCk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdC8vIGZ1bmMgY29weUJ5dGVzVG9Hbyhkc3QgW11ieXRlLCBzcmMgcmVmKSAoaW50LCBib29sKVxuXHRcdFx0XHRcdFwic3lzY2FsbC9qcy5jb3B5Qnl0ZXNUb0dvXCI6IChzcCkgPT4ge1xuXHRcdFx0XHRcdFx0c3AgPj4+PSAwO1xuXHRcdFx0XHRcdFx0Y29uc3QgZHN0ID0gbG9hZFNsaWNlKHNwICsgOCk7XG5cdFx0XHRcdFx0XHRjb25zdCBzcmMgPSBsb2FkVmFsdWUoc3AgKyAzMik7XG5cdFx0XHRcdFx0XHRpZiAoIShzcmMgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IHNyYyBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAwKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29uc3QgdG9Db3B5ID0gc3JjLnN1YmFycmF5KDAsIGRzdC5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0ZHN0LnNldCh0b0NvcHkpO1xuXHRcdFx0XHRcdFx0c2V0SW50NjQoc3AgKyA0MCwgdG9Db3B5Lmxlbmd0aCk7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50OChzcCArIDQ4LCAxKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gZnVuYyBjb3B5Qnl0ZXNUb0pTKGRzdCByZWYsIHNyYyBbXWJ5dGUpIChpbnQsIGJvb2wpXG5cdFx0XHRcdFx0XCJzeXNjYWxsL2pzLmNvcHlCeXRlc1RvSlNcIjogKHNwKSA9PiB7XG5cdFx0XHRcdFx0XHRzcCA+Pj49IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBkc3QgPSBsb2FkVmFsdWUoc3AgKyA4KTtcblx0XHRcdFx0XHRcdGNvbnN0IHNyYyA9IGxvYWRTbGljZShzcCArIDE2KTtcblx0XHRcdFx0XHRcdGlmICghKGRzdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgZHN0IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb25zdCB0b0NvcHkgPSBzcmMuc3ViYXJyYXkoMCwgZHN0Lmxlbmd0aCk7XG5cdFx0XHRcdFx0XHRkc3Quc2V0KHRvQ29weSk7XG5cdFx0XHRcdFx0XHRzZXRJbnQ2NChzcCArIDQwLCB0b0NvcHkubGVuZ3RoKTtcblx0XHRcdFx0XHRcdHRoaXMubWVtLnNldFVpbnQ4KHNwICsgNDgsIDEpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcImRlYnVnXCI6ICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2codmFsdWUpO1xuXHRcdFx0XHRcdH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnVuYyBUaHJvdyhleGNlcHRpb24sIG1lc3NhZ2UgdW5zYWZlLlBvaW50ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJnaXRsYWIuY29tL2VsaXh4aXIvd2FzbS11dGlscy9leGNlcHRpb24udGhyb3dcIjogKHNwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGNlcHRpb24gPSBsb2FkU3RyaW5nKHNwICsgOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gbG9hZFN0cmluZyhzcCArIDI0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihleGNlcHRpb24gKyBcIjogXCIgKyBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdydW50aW1lLlRocm93JzogKHNwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGNlcHRpb24gPSBsb2FkU3RyaW5nKHNwICsgOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gbG9hZFN0cmluZyhzcCArIDI0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihleGNlcHRpb24gKyBcIjogXCIgKyBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRPYmplY3QuZ28gPSB0aGlzLmltcG9ydE9iamVjdC5nb2pzO1xuXHRcdH1cblxuXHRcdGFzeW5jIHJ1bihpbnN0YW5jZSkge1xuXHRcdFx0aWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5JbnN0YW5jZSkpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiR28ucnVuOiBXZWJBc3NlbWJseS5JbnN0YW5jZSBleHBlY3RlZFwiKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2luc3QgPSBpbnN0YW5jZTtcblx0XHRcdHRoaXMubWVtID0gbmV3IERhdGFWaWV3KHRoaXMuX2luc3QuZXhwb3J0cy5tZW0uYnVmZmVyKTtcblx0XHRcdHRoaXMuX3ZhbHVlcyA9IFsgLy8gSlMgdmFsdWVzIHRoYXQgR28gY3VycmVudGx5IGhhcyByZWZlcmVuY2VzIHRvLCBpbmRleGVkIGJ5IHJlZmVyZW5jZSBpZFxuXHRcdFx0XHROYU4sXG5cdFx0XHRcdDAsXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdHRydWUsXG5cdFx0XHRcdGZhbHNlLFxuXHRcdFx0XHRnbG9iYWxUaGlzLFxuXHRcdFx0XHR0aGlzLFxuXHRcdFx0XTtcblx0XHRcdHRoaXMuX2dvUmVmQ291bnRzID0gbmV3IEFycmF5KHRoaXMuX3ZhbHVlcy5sZW5ndGgpLmZpbGwoSW5maW5pdHkpOyAvLyBudW1iZXIgb2YgcmVmZXJlbmNlcyB0aGF0IEdvIGhhcyB0byBhIEpTIHZhbHVlLCBpbmRleGVkIGJ5IHJlZmVyZW5jZSBpZFxuXHRcdFx0dGhpcy5faWRzID0gbmV3IE1hcChbIC8vIG1hcHBpbmcgZnJvbSBKUyB2YWx1ZXMgdG8gcmVmZXJlbmNlIGlkc1xuXHRcdFx0XHRbMCwgMV0sXG5cdFx0XHRcdFtudWxsLCAyXSxcblx0XHRcdFx0W3RydWUsIDNdLFxuXHRcdFx0XHRbZmFsc2UsIDRdLFxuXHRcdFx0XHRbZ2xvYmFsVGhpcywgNV0sXG5cdFx0XHRcdFt0aGlzLCA2XSxcblx0XHRcdF0pO1xuXHRcdFx0dGhpcy5faWRQb29sID0gW107ICAgLy8gdW51c2VkIGlkcyB0aGF0IGhhdmUgYmVlbiBnYXJiYWdlIGNvbGxlY3RlZFxuXHRcdFx0dGhpcy5leGl0ZWQgPSBmYWxzZTsgLy8gd2hldGhlciB0aGUgR28gcHJvZ3JhbSBoYXMgZXhpdGVkXG5cblx0XHRcdC8vIFBhc3MgY29tbWFuZCBsaW5lIGFyZ3VtZW50cyBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHRvIFdlYkFzc2VtYmx5IGJ5IHdyaXRpbmcgdGhlbSB0byB0aGUgbGluZWFyIG1lbW9yeS5cblx0XHRcdGxldCBvZmZzZXQgPSA0MDk2O1xuXG5cdFx0XHRjb25zdCBzdHJQdHIgPSAoc3RyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHB0ciA9IG9mZnNldDtcblx0XHRcdFx0Y29uc3QgYnl0ZXMgPSBlbmNvZGVyLmVuY29kZShzdHIgKyBcIlxcMFwiKTtcblx0XHRcdFx0bmV3IFVpbnQ4QXJyYXkodGhpcy5tZW0uYnVmZmVyLCBvZmZzZXQsIGJ5dGVzLmxlbmd0aCkuc2V0KGJ5dGVzKTtcblx0XHRcdFx0b2Zmc2V0ICs9IGJ5dGVzLmxlbmd0aDtcblx0XHRcdFx0aWYgKG9mZnNldCAlIDggIT09IDApIHtcblx0XHRcdFx0XHRvZmZzZXQgKz0gOCAtIChvZmZzZXQgJSA4KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcHRyO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgYXJnYyA9IHRoaXMuYXJndi5sZW5ndGg7XG5cblx0XHRcdGNvbnN0IGFyZ3ZQdHJzID0gW107XG5cdFx0XHR0aGlzLmFyZ3YuZm9yRWFjaCgoYXJnKSA9PiB7XG5cdFx0XHRcdGFyZ3ZQdHJzLnB1c2goc3RyUHRyKGFyZykpO1xuXHRcdFx0fSk7XG5cdFx0XHRhcmd2UHRycy5wdXNoKDApO1xuXG5cdFx0XHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5lbnYpLnNvcnQoKTtcblx0XHRcdGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG5cdFx0XHRcdGFyZ3ZQdHJzLnB1c2goc3RyUHRyKGAke2tleX09JHt0aGlzLmVudltrZXldfWApKTtcblx0XHRcdH0pO1xuXHRcdFx0YXJndlB0cnMucHVzaCgwKTtcblxuXHRcdFx0Y29uc3QgYXJndiA9IG9mZnNldDtcblx0XHRcdGFyZ3ZQdHJzLmZvckVhY2goKHB0cikgPT4ge1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIob2Zmc2V0LCBwdHIsIHRydWUpO1xuXHRcdFx0XHR0aGlzLm1lbS5zZXRVaW50MzIob2Zmc2V0ICsgNCwgMCwgdHJ1ZSk7XG5cdFx0XHRcdG9mZnNldCArPSA4O1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFRoZSBsaW5rZXIgZ3VhcmFudGVlcyBnbG9iYWwgZGF0YSBzdGFydHMgZnJvbSBhdCBsZWFzdCB3YXNtTWluRGF0YUFkZHIuXG5cdFx0XHQvLyBLZWVwIGluIHN5bmMgd2l0aCBjbWQvbGluay9pbnRlcm5hbC9sZC9kYXRhLmdvOndhc21NaW5EYXRhQWRkci5cblx0XHRcdGNvbnN0IHdhc21NaW5EYXRhQWRkciA9IDQwOTYgKyA4MTkyO1xuXHRcdFx0aWYgKG9mZnNldCA+PSB3YXNtTWluRGF0YUFkZHIpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwidG90YWwgbGVuZ3RoIG9mIGNvbW1hbmQgbGluZSBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGV4Y2VlZHMgbGltaXRcIik7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX2luc3QuZXhwb3J0cy5ydW4oYXJnYywgYXJndik7XG5cdFx0XHRpZiAodGhpcy5leGl0ZWQpIHtcblx0XHRcdFx0dGhpcy5fcmVzb2x2ZUV4aXRQcm9taXNlKCk7XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCB0aGlzLl9leGl0UHJvbWlzZTtcblx0XHR9XG5cblx0XHRfcmVzdW1lKCkge1xuXHRcdFx0aWYgKHRoaXMuZXhpdGVkKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkdvIHByb2dyYW0gaGFzIGFscmVhZHkgZXhpdGVkXCIpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5faW5zdC5leHBvcnRzLnJlc3VtZSgpO1xuXHRcdFx0aWYgKHRoaXMuZXhpdGVkKSB7XG5cdFx0XHRcdHRoaXMuX3Jlc29sdmVFeGl0UHJvbWlzZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdF9tYWtlRnVuY1dyYXBwZXIoaWQpIHtcblx0XHRcdGNvbnN0IGdvID0gdGhpcztcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGNvbnN0IGV2ZW50ID0geyBpZDogaWQsIHRoaXM6IHRoaXMsIGFyZ3M6IGFyZ3VtZW50cyB9O1xuXHRcdFx0XHRnby5fcGVuZGluZ0V2ZW50ID0gZXZlbnQ7XG5cdFx0XHRcdGdvLl9yZXN1bWUoKTtcblx0XHRcdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0XHRcdH07XG5cdFx0fVxuXHR9XG59KSgpO1xuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJlbm9zeXMiLCJlcnIiLCJFcnJvciIsImNvZGUiLCJnbG9iYWxUaGlzIiwiZnMiLCJvdXRwdXRCdWYiLCJjb25zdGFudHMiLCJPX1dST05MWSIsIk9fUkRXUiIsIk9fQ1JFQVQiLCJPX1RSVU5DIiwiT19BUFBFTkQiLCJPX0VYQ0wiLCJ3cml0ZVN5bmMiLCJmZCIsImJ1ZiIsImRlY29kZXIiLCJkZWNvZGUiLCJubCIsImxhc3RJbmRleE9mIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsImxlbmd0aCIsIndyaXRlIiwib2Zmc2V0IiwicG9zaXRpb24iLCJjYWxsYmFjayIsImNobW9kIiwicGF0aCIsIm1vZGUiLCJjaG93biIsInVpZCIsImdpZCIsImNsb3NlIiwiZmNobW9kIiwiZmNob3duIiwiZnN0YXQiLCJmc3luYyIsImZ0cnVuY2F0ZSIsImxjaG93biIsImxpbmsiLCJsc3RhdCIsIm1rZGlyIiwicGVybSIsIm9wZW4iLCJmbGFncyIsInJlYWQiLCJidWZmZXIiLCJyZWFkZGlyIiwicmVhZGxpbmsiLCJyZW5hbWUiLCJmcm9tIiwidG8iLCJybWRpciIsInN0YXQiLCJzeW1saW5rIiwidHJ1bmNhdGUiLCJ1bmxpbmsiLCJ1dGltZXMiLCJhdGltZSIsIm10aW1lIiwicHJvY2VzcyIsImdldHVpZCIsImdldGdpZCIsImdldGV1aWQiLCJnZXRlZ2lkIiwiZ2V0Z3JvdXBzIiwicGlkIiwicHBpZCIsInVtYXNrIiwiY3dkIiwiY2hkaXIiLCJjcnlwdG8iLCJwZXJmb3JtYW5jZSIsIlRleHRFbmNvZGVyIiwiVGV4dERlY29kZXIiLCJlbmNvZGVyIiwiR28iLCJjb25zdHJ1Y3RvciIsImFyZ3YiLCJlbnYiLCJleGl0Iiwid2FybiIsIl9leGl0UHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiX3Jlc29sdmVFeGl0UHJvbWlzZSIsIl9wZW5kaW5nRXZlbnQiLCJfc2NoZWR1bGVkVGltZW91dHMiLCJNYXAiLCJfbmV4dENhbGxiYWNrVGltZW91dElEIiwic2V0SW50NjQiLCJhZGRyIiwidiIsIm1lbSIsInNldFVpbnQzMiIsIk1hdGgiLCJmbG9vciIsImdldEludDY0IiwiZ2V0VWludDMyIiwiZ2V0SW50MzIiLCJsb2FkVmFsdWUiLCJmIiwiZ2V0RmxvYXQ2NCIsImlzTmFOIiwiaWQiLCJfdmFsdWVzIiwic3RvcmVWYWx1ZSIsIm5hbkhlYWQiLCJzZXRGbG9hdDY0IiwidW5kZWZpbmVkIiwiX2lkcyIsImdldCIsIl9pZFBvb2wiLCJwb3AiLCJfZ29SZWZDb3VudHMiLCJzZXQiLCJ0eXBlRmxhZyIsImxvYWRTbGljZSIsImFycmF5IiwibGVuIiwiVWludDhBcnJheSIsIl9pbnN0IiwibG9hZFNsaWNlT2ZWYWx1ZXMiLCJhIiwiQXJyYXkiLCJpIiwibG9hZFN0cmluZyIsInNhZGRyIiwiRGF0YVZpZXciLCJ0aW1lT3JpZ2luIiwiRGF0ZSIsIm5vdyIsImltcG9ydE9iamVjdCIsIl9nb3Rlc3QiLCJhZGQiLCJiIiwiZ29qcyIsInNwIiwiZXhpdGVkIiwicCIsIm4iLCJtc2VjIiwiZ2V0VGltZSIsInNldEludDMyIiwic2V0VGltZW91dCIsIl9yZXN1bWUiLCJoYXMiLCJjbGVhclRpbWVvdXQiLCJkZWxldGUiLCJnZXRSYW5kb21WYWx1ZXMiLCJwdXNoIiwicmVzdWx0IiwiUmVmbGVjdCIsImdldHNwIiwiZGVsZXRlUHJvcGVydHkiLCJtIiwiYXJncyIsImFwcGx5Iiwic2V0VWludDgiLCJjb25zdHJ1Y3QiLCJwYXJzZUludCIsInN0ciIsImVuY29kZSIsIlN0cmluZyIsImRzdCIsInNyYyIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwidG9Db3B5Iiwic3ViYXJyYXkiLCJ2YWx1ZSIsImV4Y2VwdGlvbiIsIm1lc3NhZ2UiLCJnbyIsInJ1biIsImluc3RhbmNlIiwiV2ViQXNzZW1ibHkiLCJJbnN0YW5jZSIsIk5hTiIsImZpbGwiLCJJbmZpbml0eSIsInN0clB0ciIsInB0ciIsImJ5dGVzIiwiYXJnYyIsImFyZ3ZQdHJzIiwiZm9yRWFjaCIsImFyZyIsIk9iamVjdCIsImtleXMiLCJzb3J0Iiwia2V5IiwicmVzdW1lIiwiX21ha2VGdW5jV3JhcHBlciIsImV2ZW50IiwiYXJndW1lbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==